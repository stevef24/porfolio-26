---
title: Advanced Patterns
description: Durable workflows for teams, long projects, and complex changes.
duration: 35m
module: Production Patterns
order: 11
---

import { SessionMemoryNote } from "@/components/visuals/SessionMemoryNote"

## Pattern 1: Pick the Right Topology First

Before prompting, choose the smallest orchestration unit that fits the work:

| Work shape | Best fit |
| :-- | :-- |
| Single task, single code path | Main session |
| Focused delegated task | Subagent |
| Multi-role parallel collaboration | Agent team |

Most failures come from picking the wrong topology, not bad prompting.

<InlineTOC />

## Pattern 2: Lead-Only Orchestration in Team Runs

When you run an agent team, keep the lead focused on coordination:

- Turn on delegate mode (`Shift+Tab` cycle when team mode is active)
- Let teammates implement; lead assigns, reviews, and synthesizes
- Use direct teammate messaging only to unblock or redirect

This reduces lead-side thrash and improves consistency.

## Pattern 3: Plan-Gated Teammates for Risky Changes

For auth, billing, schema, or infra edits, require teammates to plan before implementation.

Prompt pattern:

```text
Create an agent team for this refactor.
Require plan approval before any teammate writes code.
Only approve plans that include tests and rollback notes.
```

This keeps parallel speed without losing architectural control.

## Pattern 4: Session Memory Files

When a task spans multiple sessions, save a handoff summary:

<SessionMemoryNote />

```
.claude/sessions/2026-02-05-auth-refactor.md
```

Include:
- what changed
- what failed
- what is next

Next session, attach this file instead of re-explaining the whole history.

## Pattern 5: Conflict-Proof Parallelism

Parallel execution fails when teammates edit the same files.

Use file ownership in task prompts:

- teammate A owns `app/api/**`
- teammate B owns `lib/auth/**`
- teammate C owns tests and docs only

Ask the lead to enforce ownership boundaries before merges.

## Pattern 6: Verification Loops With Named Owners

For each teammate output:

1. Implement
2. Test
3. Self-review
4. Lead review

A loop with explicit ownership catches integration bugs earlier than one final review pass.

## Key Takeaways

- Topology choice (session vs subagent vs team) is a first-order decision
- Delegate mode makes team leads better orchestrators
- Parallelism works when ownership and approval rules are explicit
